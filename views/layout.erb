<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Gem Reference</title>
    <link href="./gempage/assets/<%= Gempage::VERSION  %>/application.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css" rel="stylesheet">
  </head>
  <body>
    <div class="content">
      <%  class_lookup = []
          grouped_result = result.group_by{ |result| result[:category] }
          grouped_result.each do |group, ruby_gems| %>
            <div class="gem-section">
              <div class="gem-group-heading">
                <h4><%= group.join(' , ') %></h4>
              </div>
              <div class="gem-group">
                <% ruby_gems.each do |rubygem| %>
                  <div class="main-gem">
                    <% group.each_with_index do |group_name, index|
                        gem_style = "z-index:#{index};"
                        gem_style += " top:#{(index * 5)}px; left:#{(index * 5)}px;"
                        class_lookup << group_name unless class_lookup.include? group_name
                        gem_color_id = class_lookup.find_index(group_name) + 1
                        gem_class = "gem gem-color-#{gem_color_id}#{' gem-color-error' if rubygem['error']}" %>
                        <div class="<%= gem_class %>" style="<%= gem_style %>" title="<%= rubygem['info'] %>">
                          <% if index == 0 %>
                            <h4>
                              <% if rubygem['homepage_uri'] %>
                                <a href="<%= rubygem['homepage_uri'] %>" target="_blank"><%= rubygem[:name] %></a>
                              <% else %>
                                <%= rubygem[:name] %>
                              <% end %>
                            </h4>
                            <% if rubygem['error'] %>
                              <h3><%= rubygem['error'] %></h3>
                            <% end
                          end
                          if rubygem['documentation_uri'] %>
                            <div class="icon documentation">
                              <a href="<%= rubygem['documentation_uri'] %>" target="_blank"><i class="fa fa-book fa-3x"></i></a>
                            </div>
                          <% end
                          if rubygem['source_code_uri'] %>
                            <div class="icon github">
                              <a href="<%= rubygem['source_code_uri'] %>" target="_blank"><i class="fa fa-github fa-3x"></i></a>
                            </div>
                          <% end
                          if rubygem['error'] %>
                            <div class="icon error">
                              <i class="fa fa-question-circle fa-3x"></i>
                            </div>
                          <% end %>
                      </div>
                    <% end %>
                  </div>
                <% end %>
              </div>
            </div>
      <% end %>
    </div>
    <div class="gem-section">
      <div class="gem-group-heading">
        <h4>Generated by <a href="https://github.com/careful-with-that-axe/gempage">gempage</a> v<%= Gempage::VERSION %></h4>
      </div>
    </div>
  </body>
</html>
